<div class="my-channel-container">
    <h1>My Channel</h1>
    <div class="channel-header">
        <div class="channel-info">
            <div class="avatar-large">
                <svg xmlns="http://www.w3.org/2000/svg" height="80" viewBox="0 -960 960 960" width="80"
                    fill="currentColor">
                    <path
                        d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v112H160Zm80-80h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0-33 23.5-56.5T480-560Zm0-80Zm0 400Z" />
                </svg>
            </div>
            <div class="details">
                <h2>{{ user()?.firstName }} {{ user()?.lastName }}</h2>
                <p>@{{ user()?.username }} • No subscribers • No videos</p>
                <p class="description">Welcome to your channel!</p>
            </div>
        </div>
        <div class="channel-actions">
            <button class="btn btn-secondary">Customize channel</button>
            <button class="btn btn-secondary" (click)="navigateToNewVideo()">Manage videos</button>
        </div>
    </div>

    <div class="channel-tabs">
        <button class="tab-btn active">Home</button>
        <button class="tab-btn">Videos</button>
        <button class="tab-btn">Playlists</button>
        <button class="tab-btn">Community</button>
        <button class="tab-btn">About</button>
    </div>

    <div class="channel-content">
        @if (videos$ | async; as videos) {
            @if (videos.length > 0) {
                <div class="video-grid">
                    @for (video of videos; track video.id) {
                        <div class="video-card" (click)="navigateToVideo(video.videoPath)">
                            <div class="thumbnail">
                                <img [src]="getThumbnailUrl(video.thumbnailPath) | secureMedia | async" alt="{{ video.title }}">
                                <div class="video-actions">
                                    <button class="action-btn edit-btn" (click)="editVideo(video.id!, $event)" title="Edit video">
                                        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20" fill="currentColor">
                                            <path d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"/>
                                        </svg>
                                    </button>
                                    <button class="action-btn delete-btn" (click)="deleteVideo(video.id!, video.title, $event)" title="Delete video">
                                        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20" fill="currentColor">
                                            <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="video-info">
                                <div class="text-info">
                                    <h3 class="video-title">{{ video.title }}</h3>
                                    <p class="video-meta">
                                        {{ video.viewsCount || 0 }} views • {{ video.createdAt | date:'MMM d, y' }}
                                    </p>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            } @else {
                <div class="empty-state">
                    <p>This channel doesn't have any content yet.</p>
                    <button class="btn btn-primary" (click)="navigateToNewVideo()">Upload your first video</button>
                </div>
            }
        } @else {
            <div class="loading-state">
                <p>Loading videos...</p>
            </div>
        }
    </div>
</div>