<nav class="navbar">
  <div class="nav-brand" (click)="onNavbarClick()">
    <div class="logo-wrapper">
      <img ngSrc="/images/lilyoutube_logo.jpg" alt="Logo" width="36" height="36" priority>
    </div>
    <span class="logo-text">LilYoutube</span>
  </div>

  <div class="search-container" *ngIf="isBrowser">
    <div class="search-bar">
      <input type="text" class="search-input" placeholder="Search">
      <button class="search-btn">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
          <path
            d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
        </svg>
      </button>
    </div>
  </div>

  <div class="nav-actions" *ngIf="isBrowser">
    <ng-container *ngIf="!isLoggedIn; else loggedInBlock">
      <button class="nav-btn" (click)="goToLogin()">Login</button>
      <button class="nav-btn primary" (click)="goToRegister()">Register</button>
    </ng-container>

    <ng-template #loggedInBlock>
      <button class="watch-party-btn" (click)="goToWatchParty()" title="Watch Party">
        <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="currentColor">
          <path d="M0-240v-63q0-43 44-70t116-27q13 0 25 .5t23 2.5q-14 21-21 44t-7 48v65H0Zm240 0v-65q0-32 17.5-58.5T307-410q32-20 76.5-30t96.5-10q53 0 97.5 10t76.5 30q32 20 49 46.5t17 58.5v65H240Zm540 0v-65q0-26-6.5-49T754-397q11-2 22.5-2.5t23.5-.5q72 0 116 26.5t44 70.5v63H780Zm-455-80h311q-10-20-55.5-35T480-370q-55 0-100.5 15T325-320ZM160-440q-33 0-56.5-23.5T80-520q0-34 23.5-57t56.5-23q34 0 57 23t23 57q0 33-23 56.5T160-440Zm640 0q-33 0-56.5-23.5T720-520q0-34 23.5-57t56.5-23q34 0 57 23t23 57q0 33-23 56.5T800-440Zm-320-40q-50 0-85-35t-35-85q0-51 35-85.5t85-34.5q51 0 85.5 34.5T600-600q0 50-34.5 85T480-480Z"/>
        </svg>
        <span>Watch Party</span>
      </button>

      <button class="profile-btn" (click)="onProfileClick()" title="Profile">
        <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="currentColor">
          <path
            d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v112H160Zm80-80h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Z" />
        </svg>
        <span>{{ user()?.username || 'Profile' }}</span>
      </button>

      <button class="logout-btn" (click)="onLogoutClick()" title="Log out">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
          <path
            d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" />
        </svg>
      </button>
    </ng-template>
  </div>
</nav>